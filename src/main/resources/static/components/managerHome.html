<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
	<div id="dashboard">
		<div class="cardBox">
			<div class="card">
				<div>
					<div class="numbers" id="totalTeams"></div>
					<div class="cardName">Total Teams</div>
				</div>
				<div class="iconBx">
					<i class="bi bi-list-stars"></i>
				</div>
			</div>

			<div class="card">
				<div>
					<div class="numbers" id="projectAmount"></div>
					<div class="cardName">Total Projects</div>
				</div>
				<div class="iconBx">
					<i class="bi bi-kanban"></i>
				</div>
			</div>

			<div class="card">
				<div>
					<div class="numbers" id="currentDate">Date</div>
					<div class="cardName">Date</div>
				</div>
				<div class="iconBx">
					<i class="bi bi-calendar"></i>
				</div>
			</div>
		</div>
	</div>

	<!-- Project Creation -->
	<div class="details">
		<div class="todo">
			<div class="cardHeader">
				<h2>Your Projects</h2>
				<button id="openProjectModal" class="btn btn-primary">New</button>
			</div>
			<table id="project-table" class="table">
				<thead>
					<tr>
						<th>Project Name</th>
						<th>Team Assigned</th>
						<th>Actions</th>
					</tr>
				</thead>
				<tbody>
					<!-- Body should populate -->
				</tbody>
			</table>
		</div>
	</div>


	<!-- New Project Modal -->
	<div class="modal fade" id="newProjectModal" tabindex="-1"
		aria-labelledby="newProjectModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="newProjectModalLabel">New Project</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal"
						aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<form>
						<div class="mb-3">
							<label for="project-name" class="form-label">Project Name</label>
							<input type="text" id="project-name" name="project-name"
								class="form-control" placeholder="Enter Project Name">
						</div>
						<div class="mb-3">
							<label for="select-team" class="form-label">Select team</label> <select
								id="select-team" name="select-team" class="form-select"
								onchange="updateTeamMembers()">
								<option value="Team A">Team A</option>
								<option value="Team B">Team B</option>
								<option value="Team C">Team C</option>
							</select>
						</div>
						<button type="button" class="btn btn-primary mb-4"
							onclick="createProject()">Create</button>
					</form>
				</div>
			</div>
		</div>
	</div>

	<!-- Task Creation -->
	<div class="details">
		<div class="todo">
			<div class="cardHeader">
				<h2>Create Tasks</h2>
				<button id="openCreateTasktModal" class="btn btn-primary">New</button>
			</div>
			<table id="task-table" class="table">
				<thead>
					<tr>
						<th>Task Name</th>
						<th>Assigned Project</th>
						<th>Assigned Person</th>
						<th>Actions</th>
					</tr>
				</thead>
				<tbody>
					<!-- Body should populate -->
				</tbody>
			</table>
		</div>
	</div>

	<!-- New Task Modal -->
	<div class="modal fade" id="newCreateTaskModal" tabindex="-1"
		aria-labelledby="newCreateTaskModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="newCreateTaskModalLabel">New Task</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal"
						aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<form>
						<div class="mb-3">
							<label for="task-name" class="form-label">Task Name</label> <input
								type="text" id="task-name" name="task-name" class="form-control"
								placeholder="Enter Task Name">
						</div>
						<div class="mb-3">
							<label for="assign-project" class="form-label">Assign
								Project</label> <select id="assign-project" name="assign-project"
								class="form-select">
								<!-- Project options will be dynamically added here -->
							</select>
						</div>
						<div class="mb-3">
							<label for="assign-person" class="form-label">Assign to
								Person</label> <select id="assign-person" name="assign-person"
								class="form-select">
								<!-- Person options will be dynamically added here -->
							</select>
						</div>
						<button type="button" class="btn btn-primary mb-4"
							onclick="createTask()">Create</button>
					</form>
				</div>
			</div>
		</div>
	</div>
<script src="/js/managerHome.js"></script>

	<script>
	document.addEventListener("DOMContentLoaded", function () {
	    // Store projects, tasks, and team member lists
	    const projects = [];
	    const tasks = [];

	    const teamMembers = {
	        "Team A": ["John Doe", "Jane Smith", "Paul Green"],
	        "Team B": ["Mary White", "Mike Brown", "Anna Lee"],
	        "Team C": ["James Taylor", "Olivia Davis", "Liam Johnson"]
	    };

	    const newProjectModal = new bootstrap.Modal(document.getElementById('newProjectModal'));
	    const newTaskModal = new bootstrap.Modal(document.getElementById('newCreateTaskModal'));

	    document.getElementById("openProjectModal").addEventListener("click", function () {
	        newProjectModal.show();
	    });

	    document.getElementById("openCreateTasktModal").addEventListener("click", function () {
	        newTaskModal.show();
	    });

	    document.querySelector("#newProjectModal .btn-close").addEventListener("click", function () {
	        newProjectModal.hide();
	    });

	    document.querySelector("#newCreateTaskModal .btn-close").addEventListener("click", function () {
	        newTaskModal.hide();
	    });

	    function createProject() {
	        const projectName = document.getElementById("project-name").value;
	        const selectedTeam = document.getElementById("select-team").value;

	        if (projectName.trim() !== "") {
	            const project = { name: projectName, team: selectedTeam };
	            projects.push(project);
	            updateProjectTable();
	            updateProjectSelectOptions();
	            document.getElementById("project-name").value = ''; // Clear input field
	            newProjectModal.hide();
	        }
	    }

	    function updateProjectTable() {
	        const projectTableBody = document.querySelector("#project-table tbody");
	        projectTableBody.innerHTML = '';

	        projects.forEach((project, index) => {
	            const row = document.createElement('tr');
	            row.innerHTML = `
	                <td>${project.name}</td>
	                <td>${project.team}</td>
	                <td><button class="btn btn-danger" onclick="deleteProject(${index})">Delete</button></td>
	            `;
	            projectTableBody.appendChild(row);
	        });
	    }

	    function deleteProject(index) {
	        projects.splice(index, 1);
	        updateProjectTable();
	        updateProjectSelectOptions();
	    }

	    function updateProjectSelectOptions() {
	        const projectSelect = document.getElementById("assign-project");
	        projectSelect.innerHTML = '';

	        projects.forEach((project, index) => {
	            const option = document.createElement("option");
	            option.value = index;
	            option.textContent = project.name;
	            projectSelect.appendChild(option);
	        });
	    }

	    function updateTeamMembers() {
	        const selectedTeam = document.getElementById("select-team").value;
	        const personSelect = document.getElementById("assign-person");
	        personSelect.innerHTML = '';

	        teamMembers[selectedTeam].forEach(member => {
	            const option = document.createElement("option");
	            option.value = member;
	            option.textContent = member;
	            personSelect.appendChild(option);
	        });
	    }

	    function createTask() {
	        const taskName = document.getElementById("task-name").value;
	        const projectIndex = document.getElementById("assign-project").value;
	        const assignedPerson = document.getElementById("assign-person").value;

	        if (taskName.trim() !== "") {
	            const task = {
	                name: taskName,
	                assignedTo: assignedPerson,
	                project: projects[projectIndex].name
	            };
	            tasks.push(task);
	            updateTaskTable();
	            document.getElementById("task-name").value = ''; // Clear input field
	            newTaskModal.hide();
	        }
	    }

	    function updateTaskTable() {
	        const taskTableBody = document.querySelector("#task-table tbody");
	        taskTableBody.innerHTML = '';

	        tasks.forEach((task, index) => {
	            const row = document.createElement('tr');
	            row.innerHTML = `
	                <td>${task.name}</td>
	                <td>${task.project}</td>
	                <td>${task.assignedTo}</td>
	                <td><button class="btn btn-danger" onclick="deleteTask(${index})">Delete</button></td>
	            `;
	            taskTableBody.appendChild(row);
	        });
	    }

	    function deleteTask(index) {
	        tasks.splice(index, 1);
	        updateTaskTable();
	    }

	    window.createProject = createProject;
	    window.deleteProject = deleteProject;
	    window.createTask = createTask;
	    window.deleteTask = deleteTask;
	    window.updateTeamMembers = updateTeamMembers;

	    updateTeamMembers();
	});

    </script>

</body>
</html>
